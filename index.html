<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kraken Personal — Compounding to $1M (Failsafe Inline)</title>
<style>
  :root { color-scheme: light; }
  body{margin:0;padding:24px;font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:#f6f7f9;color:#111}
  .wrap{max-width:1100px;margin:0 auto}
  h1{margin:0 0 4px;font-size:22px}
  .sub{color:#555;margin:0 0 16px}
  .badge{display:inline-block;padding:3px 8px;border-radius:999px;background:#eef1f4;color:#344;text-transform:none;font-size:12px;margin-left:8px}
  .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px;margin:16px 0 20px}
  .card{background:#fff;border:1px solid #e4e7ec;border-radius:12px;padding:12px;box-shadow:0 1px 1px rgba(10,10,10,.02)}
  .metric{font-size:12px;color:#667085}
  .value{font-weight:700;font-size:18px;margin-top:4px}
  table{width:100%;border-collapse:collapse;background:#fff;border:1px solid #e4e7ec;border-radius:12px;overflow:hidden}
  thead th{font-size:12px;color:#667085;text-align:left;background:#f8f9fb;padding:10px;border-bottom:1px solid #e4e7ec}
  tbody td{padding:10px;border-bottom:1px solid #f0f1f3;font-size:13px}
  tbody tr:last-child td{border-bottom:0}
  code.small{background:#f1f3f8;border-radius:6px;padding:2px 6px;font-size:12px}
  .mt16{margin-top:16px}.mt24{margin-top:24px}.mt32{margin-top:32px}
  .muted{color:#6b7280}
  .ok{color:#056b36}
  .bar{height:8px;background:#e6eaf0;border-radius:999px;overflow:hidden}
  .bar>span{display:block;height:100%;background:#111;border-radius:999px}
</style>
</head>
<body>
<div class="wrap">
  <h1>Kraken Personal — Compounding to $1M <span class="badge">Data source: inline only</span></h1>
  <p class="sub">Goal: +1% net per iteration (fees ~0.24% round-trip ⇒ aim ~1.24% gross). This file ignores localStorage and remote JSON so it always shows the embedded data.</p>

  <div id="kpis" class="grid"></div>

  <div class="card">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
      <div>
        <div class="metric">Current Iteration — Net Progress</div>
        <div class="value" id="netProgressValue">—</div>
      </div>
      <span class="badge">Target +1.00% net</span>
    </div>
    <div class="bar"><span id="netProgressBar" style="width:0%"></span></div>
    <div class="muted mt16" id="netProgressHelp"></div>
  </div>

  <div class="mt24">
    <h3 style="margin:0 0 8px;font-size:16px">Iteration Summary</h3>
    <table>
      <thead>
        <tr>
          <th>Iteration #</th>
          <th>Expected Amount to Invest</th>
          <th>Expected Net Required (1%)</th>
          <th>Remaining to Invest</th>
          <th>Actual (Net)</th>
          <th>Time Frame</th>
          <th>Tokens</th>
        </tr>
      </thead>
      <tbody id="iterationsTable"></tbody>
    </table>
  </div>

  <div class="mt24">
    <h3 style="margin:0 0 8px;font-size:16px">Current Iteration — Trades Log</h3>
    <table>
      <thead>
        <tr>
          <th>Timestamp (ET)</th>
          <th>Token</th>
          <th>Invested ($)</th>
          <th>Profit (Net $)</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody id="tradesTable"></tbody>
    </table>
  </div>

  <div class="mt24 card">
    <div class="metric">Derived (Current Iteration)</div>
    <ul id="derived" style="margin:8px 0 0 16px;padding:0 0 0 8px"></ul>
  </div>

  <p class="muted mt32">
    If you later want persistence and paste-to-add, we can re-enable storage. For now this file is “bullet-proof”: it always renders the embedded data.
  </p>
</div>

<script>
  // === Inline, unchangeable data (your table) ===
  const iterations = [
    {"iteration":4,"expected":26054.72,"expectedNet":260.55,"remainingInvest":8701.56,"actualNet":201.61,"timeFrame":"8/15/25 6:49 PM – 8/18/25 6:05 PM","tokens":"AVAX, FARTCOIN, PENGU, OP, ATOM, SUI, SOL, ADA, ARB (partial)"},
    {"iteration":3,"expected":25558.39,"expectedNet":255.58,"remainingInvest":0.00,"actualNet":496.33,"timeFrame":"8/13/25 8:00 PM – 8/15/25 8:32 PM","tokens":"TON, XRP, SOL, ADA, LTC, TAO, FARTCOIN"},
    {"iteration":2,"expected":25252.46,"expectedNet":252.52,"remainingInvest":0.00,"actualNet":305.93,"timeFrame":"8/13/25 8:00 PM – 8/13/25 11:30 PM","tokens":"AVAX, TAO, PEPE, SUI, SOL, XTZ, FARTCOIN, BTC"},
    {"iteration":1,"expected":25000.00,"expectedNet":250.00,"remainingInvest":0.00,"actualNet":252.46,"timeFrame":"8/12/25 3:06 PM – 8/13/25 12:00 PM","tokens":"SOL, AVAX, ARB, UNI, LDO, PEPE, ADA, LTC"}
  ];
  const trades = [
    {"timestamp":"8/18/25 5:58 PM","token":"ARB","invested":3007.05,"profit":38.51,"notes":"—"},
    {"timestamp":"8/18/25 6:05 PM","token":"SUI","invested":1000.00,"profit":12.04,"notes":"latest trade"}
  ];

  // === Rendering ===
  const $ = s => document.querySelector(s);
  const usd = n => n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:2});
  iterations.sort((a,b)=>b.iteration-a.iteration);
  const cur = iterations[0];

  // KPIs
  const kpis = [
    {label:"Current Iteration", value:"#"+cur.iteration, hint:cur.timeFrame},
    {label:"Expected Amount to Invest", value:usd(cur.expected), hint:"Pool this iteration"},
    {label:"Actual (Net) So Far", value:usd(cur.actualNet), hint:"Net gains this iteration"},
    {label:"Remaining to Invest", value:usd(cur.remainingInvest), hint:"Allocation left"}
  ];
  $('#kpis').innerHTML = kpis.map(k=>`
    <div class="card">
      <div class="metric">${k.label}</div>
      <div class="value">${k.value}</div>
      <div class="muted" style="margin-top:4px">${k.hint||""}</div>
    </div>
  `).join('');

  // Progress
  const pct = Math.max(0, Math.min(100, (cur.actualNet/cur.expectedNet)*100));
  $('#netProgressValue').textContent = pct.toFixed(1) + "% of +" + usd(cur.expectedNet) + " target";
  $('#netProgressBar').style.width = pct.toFixed(2) + "%";
  $('#netProgressHelp').textContent = "Actual (Net): " + usd(cur.actualNet) + " • Remaining net: " + usd((cur.expectedNet-cur.actualNet).toFixed(2));

  // Iteration table
  $('#iterationsTable').innerHTML = iterations.map(r=>`
    <tr>
      <td><strong>#${r.iteration}</strong></td>
      <td>${usd(r.expected)}</td>
      <td>${usd(r.expectedNet)}</td>
      <td>${usd(r.remainingInvest)}</td>
      <td>${usd(r.actualNet)}${r.iteration===cur.iteration? ' <span class="muted">(partial)</span>':''}</td>
      <td>${r.timeFrame||'—'}</td>
      <td>${r.tokens||''}</td>
    </tr>
  `).join('');

  // Trades table
  $('#tradesTable').innerHTML = trades.map(t=>`
    <tr>
      <td>${t.timestamp}</td>
      <td><strong>${t.token}</strong></td>
      <td>${usd(t.invested)}</td>
      <td>${usd(t.profit)}</td>
      <td>${t.notes||'—'}</td>
    </tr>
  `).join('');

  // Derived list
  const remainingNet = +(cur.expectedNet - cur.actualNet).toFixed(2);
  const capitalAllocated = +(cur.expected - cur.remainingInvest).toFixed(2);
  const allocPct = Math.max(0, Math.min(100, (capitalAllocated/cur.expected)*100));
  const netNeededPct = cur.remainingInvest>0 ? (remainingNet/cur.remainingInvest)*100 : 0;
  const grossNeededPct = netNeededPct + 0.24; // % fees estimate

  $('#derived').innerHTML = `
    <li>Remaining net to 1% target: <strong>${usd(remainingNet)}</strong></li>
    <li>% of net target achieved: <strong>${pct.toFixed(1)}%</strong></li>
    <li>Capital invested so far this iteration: <strong>${usd(capitalAllocated)}</strong> (${allocPct.toFixed(1)}%)</li>
    <li>Running equity (if closed now): <strong>${usd(25000 + 252.46 + 305.93 + 496.33 + cur.actualNet)}</strong></li>
    <li>Net needed on remaining capital: <strong>${netNeededPct.toFixed(2)}%</strong> (≈ <strong>${grossNeededPct.toFixed(2)}% gross</strong> incl. fees)</li>
  `;
</script>
</body>
</html>
